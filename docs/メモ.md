# メモ

とりあえずWebViewまわりで知ったことを雑にこのファイルにまとめる
今後整理するつもりだから一旦雑にメモしていく

## WebView 権限

`AndroidManifest.xml` に `<uses-permission android:name="android.permission.INTERNET"/>` を設定しないでWebViewでアクセスしようとした時は以下のような表示となる

<img src="./image/webview_not_available_insufficient_permission.png" width="400" />

## アプリ外ブラウザ

以下の処理で呼び出せる
端末にブラウザがないときに`ActivityNotFoundException`が発生するため例外処理はあったほうが良い

```kotlin
val intent = Intent(Intent.ACTION_VIEW, ＜ URL ＞)
context.startActivity(intent)
```

## アプリ内ブラウザ（Custom Tabs）

[Android カスタムタブの概要 - Android Developers](https://developer.android.com/develop/ui/views/layout/webapps/overview-of-android-custom-tabs?hl=ja)

`implementation("androidx.browser:browser:＜バージョン＞")`の依存が必要

## Partial Custom Tabs

シート状（ハーフシート）で Custom Tabs を表示できる

[部分的なカスタムタブによるマルチタスク - chrome for developers](https://developer.chrome.com/docs/android/custom-tabs/guide-partial-custom-tabs?hl=ja)
[【Android】Custom Tabsの高さを調節してボトムシートのように表示させる方法](https://tech.yappli.io/entry/android-customtabs-bottomsheet)
[Partial Custom Tabを使ってブラウザを良い感じに使う](https://qiita.com/kokada420/items/d5837a7f8823a7ff006a)

## WebView

[Jetpack Compose で雑に WebView を使いたいとき](https://zenn.dev/kaleidot725/articles/2021-11-13-jc-simple-webview)

最も簡単なWebView表示はおそらく以下（難点としては、ページ内のリンクをクリックすると外部ブラウザで開かれてしまう）

```kotlin
AndroidView(
    factory = ::WebView,
    update = { it.loadUrl(url) },
)
```